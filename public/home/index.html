<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ë§ˆì¼“ - ì‹¬ë§ˆì¼“ í™ˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="ì‹¬ë§ˆì¼“ - ì˜¤ëŠ˜ ë°¤, ì–´ë–¤ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ë¡œ ë†€ì•„ë³¼ê¹Œìš”? AI & ì „ë¬¸ê°€ê°€ ë§Œë“  ì—°ì• /ì„±ê²©/ê¸ˆì „/ì§ì¥/ìš°ì • ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ë§ˆì¼“."
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700;800&display=swap"
    rel="stylesheet"
  />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: radial-gradient(circle at top, #eef2ff 0, #f9fafb 40%, #f5f3ff 100%);
      color: #111827;
      min-height: 100vh;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    .page {
      max-width: 1180px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }

    /* HEADER */

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 18px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 32px;
      height: 32px;
      border-radius: 14px;
      background: conic-gradient(
        from 140deg,
        #f97316,
        #fb7185,
        #a855f7,
        #22c55e,
        #38bdf8,
        #f97316
      );
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: 800;
      font-size: 16px;
      box-shadow: 0 10px 25px rgba(148, 163, 184, 0.55);
    }

    .brand-text-title {
      font-size: 18px;
      font-weight: 800;
      color: #111827;
    }

    .brand-text-sub {
      font-size: 12px;
      color: #6b7280;
    }

    .top-right {
      display: flex;
      gap: 8px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .chip {
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.04);
      color: #4b5563;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .chip b {
      color: #111827;
    }

    .btn-sm-outline {
      padding: 7px 12px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #fff;
      font-size: 12px;
      color: #374151;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: all 0.18s ease;
    }

    .btn-sm-outline:hover {
      background: #f9fafb;
      transform: translateY(-1px);
      box-shadow: 0 7px 18px rgba(148, 163, 184, 0.35);
    }

    .btn-sm-primary {
      padding: 7px 14px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #4f46e5, #ec4899);
      color: #fff;
      font-weight: 600;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(129, 140, 248, 0.55);
      transition: all 0.2s ease;
    }

    .btn-sm-primary:hover {
      transform: translateY(-1px) scale(1.01);
      box-shadow: 0 16px 32px rgba(129, 140, 248, 0.7);
    }

    /* HERO SLIDER */

    .hero {
      position: relative;
      border-radius: 24px;
      padding: 22px 20px 24px;
      margin-bottom: 20px;
      overflow: hidden;
      background: radial-gradient(circle at top left, #4f46e5, #7c3aed, #ec4899);
      color: #fff;
      box-shadow: 0 18px 45px rgba(79, 70, 229, 0.45);
    }

    .hero-inner {
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 1.8fr);
      gap: 20px;
      align-items: center;
    }

    .hero-badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }

    .hero-badge {
      padding: 5px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(15, 23, 42, 0.22);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .hero-title {
      font-size: 24px;
      font-weight: 800;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
    }

    .hero-sub {
      font-size: 13px;
      color: #e5e7eb;
      max-width: 320px;
      line-height: 1.5;
      margin-bottom: 16px;
    }

    .hero-btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 8px;
    }

    .hero-meta {
      font-size: 11px;
      color: #e5e7eb;
      opacity: 0.85;
    }

    /* Slider right */

    .hero-slider {
      position: relative;
      height: 170px;
      border-radius: 18px;
      overflow: hidden;
      background: rgba(15, 23, 42, 0.16);
    }

    .hero-slide-track {
      width: 100%;
      height: 100%;
      position: relative;
    }

    .hero-slide {
      position: absolute;
      inset: 0;
      padding: 18px 18px 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      border-radius: 18px;
      backdrop-filter: blur(10px);
      opacity: 0;
      transform: translateX(8px);
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    .hero-slide.active {
      opacity: 1;
      transform: translateX(0);
    }

    .hero-slide:nth-child(1) {
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.18), rgba(79, 70, 229, 0.7));
    }

    .hero-slide:nth-child(2) {
      background: linear-gradient(135deg, rgba(248, 250, 252, 0.16), rgba(251, 113, 133, 0.7));
    }

    .hero-slide:nth-child(3) {
      background: linear-gradient(135deg, rgba(248, 250, 252, 0.16), rgba(52, 211, 153, 0.7));
    }

    .hero-slide-tag {
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.3);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .hero-slide-title {
      font-size: 15px;
      font-weight: 700;
      margin-top: 10px;
      margin-bottom: 4px;
    }

    .hero-slide-desc {
      font-size: 11px;
      line-height: 1.5;
      color: #eef2ff;
      max-width: 210px;
    }

    .hero-slide-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      gap: 10px;
      font-size: 11px;
    }

    .hero-slide-avatars {
      display: flex;
      align-items: center;
    }

    .hero-dot-row {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 6px;
    }

    .hero-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(226, 232, 240, 0.5);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .hero-dot.active {
      width: 16px;
      background: #eef2ff;
    }

    /* CATEGORY TABS */

    .category-row {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 8px;
      margin-bottom: 16px;
    }

    .cat-pill {
      flex-shrink: 0;
      border-radius: 999px;
      padding: 7px 14px;
      font-size: 12px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: rgba(249, 250, 251, 0.85);
      color: #4b5563;
      cursor: pointer;
      transition: all 0.16s ease;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .cat-pill span {
      font-size: 11px;
      color: #9ca3af;
    }

    .cat-pill.active {
      background: #111827;
      color: #f9fafb;
      border-color: #111827;
      box-shadow: 0 9px 22px rgba(15, 23, 42, 0.35);
    }

    /* SECTIONS */

    .section {
      margin-top: 4px;
      margin-bottom: 22px;
    }

    .section-head {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      margin-bottom: 10px;
      gap: 8px;
    }

    .section-title {
      font-size: 16px;
      font-weight: 700;
      letter-spacing: -0.015em;
    }

    .section-sub {
      font-size: 11px;
      color: #6b7280;
    }

    .section-link {
      font-size: 12px;
      color: #4f46e5;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .card-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 960px) {
      .card-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }

      .hero-inner {
        grid-template-columns: minmax(0, 1fr);
      }

      .hero {
        padding: 20px 18px 22px;
      }

      .hero-slider {
        height: 160px;
      }
    }

    @media (max-width: 640px) {
      .page {
        padding: 16px 14px 32px;
      }

      .top-bar {
        flex-direction: column;
        align-items: flex-start;
      }

      .card-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .hero-title {
        font-size: 20px;
      }
    }

    /* CARD */

    .card {
      position: relative;
      border-radius: 18px;
      background: rgba(255, 255, 255, 0.96);
      box-shadow: 0 10px 26px rgba(148, 163, 184, 0.25);
      overflow: hidden;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      transition: transform 0.18s ease, box-shadow 0.18s ease,
        translate 0.18s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.35);
    }

    .card-thumb {
      position: relative;
      padding-bottom: 56%;
      overflow: hidden;
    }

    .card-thumb img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scale(1.02);
      transition: transform 0.25s ease;
    }

    .card:hover .card-thumb img {
      transform: scale(1.06);
    }

    .card-chip {
      position: absolute;
      left: 10px;
      top: 10px;
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.75);
      color: #f9fafb;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .card-chip.hot {
      background: rgba(248, 113, 113, 0.95);
    }

    .card-body {
      padding: 10px 11px 11px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .card-title {
      font-size: 13px;
      font-weight: 700;
      letter-spacing: -0.02em;
      line-height: 1.4;
    }

    .card-desc {
      font-size: 11px;
      color: #6b7280;
      line-height: 1.5;
      min-height: 32px;
    }

    .card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      font-size: 10px;
    }

    .card-tag {
      padding: 3px 7px;
      border-radius: 999px;
      background: #f3f4f6;
      color: #4b5563;
    }

    .card-footer {
      margin-top: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: #9ca3af;
    }

    .card-stat {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .empty-msg {
      font-size: 12px;
      color: #9ca3af;
      padding: 10px 2px 4px;
    }

    footer {
      margin-top: 18px;
      font-size: 11px;
      color: #9ca3af;
      text-align: right;
    }

    footer a {
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="page">
    <!-- HEADER -->
    <header class="top-bar">
      <div class="brand">
        <div class="brand-logo">ì‹¬</div>
        <div>
          <div class="brand-text-title">ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ë§ˆì¼“ <span style="color:#4f46e5;">ì‹¬ë§ˆì¼“</span></div>
          <div class="brand-text-sub">ì˜¤ëŠ˜ ê¸°ë¶„ì— ë§ëŠ” ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ë¥¼ í•œ ë²ˆì—</div>
        </div>
      </div>

      <div class="top-right">
        <div class="chip">
          ì˜¤ëŠ˜ ì—…ë°ì´íŠ¸ <b id="todayCount">0</b>ê°œ Â· ì „ì²´ <b id="totalCount">0</b>ê°œ
        </div>
        <button class="btn-sm-outline" onclick="location.href='index.html'">
          AI ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ìƒì„±
        </button>
        <button class="btn-sm-primary" onclick="location.href='admin.html'">
          ê´€ë¦¬ì í˜ì´ì§€
        </button>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero">
      <div class="hero-inner">
        <div>
          <div class="hero-badge-row">
            <div class="hero-badge">Beta Â· ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ë§ˆì¼“ ì˜¤í”ˆ</div>
            <div class="hero-badge">AI + ì‚¬ëŒì´ ê°™ì´ ë§Œë“œëŠ” í…ŒìŠ¤íŠ¸</div>
          </div>
          <h1 class="hero-title">ì˜¤ëŠ˜ ë°¤, ì–´ë–¤ í…ŒìŠ¤íŠ¸ë¡œ ë†€ì•„ë³¼ê¹Œìš”?</h1>
          <p class="hero-sub">
            ì—°ì•  ì˜¨ë„, TMI ì„±ê²©, ê¸ˆì „ ê°ê°ê¹Œì§€. AIì™€ ì‹¬ë§ˆì¼“ íë ˆì´í„°ê°€ ì—„ì„ í•œ
            ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ë¥¼ ëª¨ì•„ ë‘” ë§ˆì¼“ì…ë‹ˆë‹¤.
          </p>
          <div class="hero-btn-row">
            <button class="btn-sm-primary" onclick="scrollToSection('popularSection')">
              ğŸ”¥ ì§€ê¸ˆ ì¸ê¸° TOP
            </button>
            <button class="btn-sm-outline" onclick="scrollToSection('latestSection')">
              âœ¨ ë”°ëˆë”°ëˆ ìµœì‹ 
            </button>
          </div>
          <div class="hero-meta">
            * í…ŒìŠ¤íŠ¸ ê²°ê³¼ëŠ” ì—”í„°í…Œì¸ë¨¼íŠ¸ ìš©ë„ì´ë©°, ë„ˆë¬´ ì§„ì§€í•˜ê²Œ ë°›ì•„ë“¤ì´ì§€ ë§ê³  ì¬ë°Œê²Œ ì¦ê²¨ ì£¼ì„¸ìš”.
          </div>
        </div>

        <!-- SLIDER -->
        <div class="hero-slider" id="heroSlider">
          <div class="hero-slide-track">
            <article class="hero-slide active">
              <div>
                <div class="hero-slide-tag">ì—°ì•  Â· MBTI ê°ì„±</div>
                <div class="hero-slide-title">ë‚˜ì˜ ì—°ì•  ì˜¨ë„ 4ë‹¨ê³„ í…ŒìŠ¤íŠ¸</div>
                <p class="hero-slide-desc">
                  ìš”ì¦˜ ë‚´ ì—°ì•  í…ì…˜ì€ ëª‡ ë„ì¯¤ì¼ê¹Œ? ì¹œêµ¬ì™€ ê°™ì´ í’€ì–´ë³´ë©´ ë” ì¬ë°ŒëŠ” ì—°ì•  ì˜¨ë„ ì²´í¬ í…ŒìŠ¤íŠ¸.
                </p>
              </div>
              <div class="hero-slide-bottom">
                <span>í‰ê·  ì°¸ì—¬ 12,384ëª… Â· ì¬ë°Œì–´ì„œ ë˜ í•œë‹¤ëŠ” í…ŒìŠ¤íŠ¸</span>
                <span>â™¥ ì˜¤ëŠ˜ì˜ ì¶”ì²œ</span>
              </div>
            </article>

            <article class="hero-slide">
              <div>
                <div class="hero-slide-tag">TMI ì„±ê²© Â· í•˜ë£¨ ë£¨í‹´</div>
                <div class="hero-slide-title">TMI ì„±ê²© ìœ í˜• TEST</div>
                <p class="hero-slide-desc">
                  íšŒì‚¬ì—ì„œëŠ” ë©€ì©¡í•œë°, ì§‘ì—ë§Œ ì˜¤ë©´ ì´ìƒí•´ì§€ëŠ” ë‚˜? TMIê¹Œì§€ íŒŒí—¤ì³ ì£¼ëŠ” ì›ƒê¸´ ì„±ê²© í…ŒìŠ¤íŠ¸.
                </p>
              </div>
              <div class="hero-slide-bottom">
                <span>ì¶œê·¼ê¸¸ Â· ì¹œêµ¬ë“¤ì´ë‘ Â· íšŒì‹ ëë‚˜ê³  í•˜ê¸° ì¢‹ìŒ</span>
                <span>ğŸ˜† ì›ƒê¸´ ê²°ê³¼ ëª¨ìŒ</span>
              </div>
            </article>

            <article class="hero-slide">
              <div>
                <div class="hero-slide-tag">ê¸ˆì „ ê°ê° Â· í”Œë ‰ìŠ¤</div>
                <div class="hero-slide-title">ê¸ˆì „ ê°ê° ì²´í¬: í”Œë ‰ìŠ¤ vs ì§ í…Œí¬</div>
                <p class="hero-slide-desc">
                  ë‚˜ëŠ” í”Œë ‰ìŠ¤ íŒŒì¸ê°€, ì§ í…Œí¬ íŒŒì¸ê°€? ì†Œë¹„ ì„±í–¥ë¶€í„° í†µì¥ ì²´ì§ˆê¹Œì§€ ê°€ë³ê²Œ ì²´í¬í•´ ë³´ëŠ” í…ŒìŠ¤íŠ¸.
                </p>
              </div>
              <div class="hero-slide-bottom">
                <span>ë¨¸ë‹ˆÂ·ì†Œë¹„ ì„±í–¥ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ 3ì¢… ì„¸íŠ¸ ì¤€ë¹„ ì¤‘</span>
                <span>ğŸ’° ì´ë²ˆ ë‹¬ ì†Œë¹„ ì„±ì°°</span>
              </div>
            </article>
          </div>
          <div class="hero-dot-row">
            <div class="hero-dot active" data-index="0"></div>
            <div class="hero-dot" data-index="1"></div>
            <div class="hero-dot" data-index="2"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- CATEGORY TABS -->
    <nav class="category-row" id="categoryRow">
      <button class="cat-pill active" data-category="all">
        ì „ì²´ <span>All</span>
      </button>
      <button class="cat-pill" data-category="ì—°ì• ">
        ì—°ì• /ì¸/ê´€ê³„ <span>Love</span>
      </button>
      <button class="cat-pill" data-category="ì„±ê²©">
        ì„±ê²©/MBTI ê°ì„± <span>Personality</span>
      </button>
      <button class="cat-pill" data-category="ê¸ˆì „">
        ê¸ˆì „/ì†Œë¹„ ì„±í–¥ <span>Money</span>
      </button>
      <button class="cat-pill" data-category="ì§ì¥">
        ì§ì¥/ì»¤ë¦¬ì–´ <span>Work</span>
      </button>
      <button class="cat-pill" data-category="ìš°ì •">
        ìš°ì •/ëŒ€ì¸ê´€ê³„ <span>Friends</span>
      </button>
      <button class="cat-pill" data-category="ë¼ì´í”„">
        ë¼ì´í”„ìŠ¤íƒ€ì¼ <span>Life</span>
      </button>
    </nav>

    <!-- POPULAR SECTION -->
    <section class="section" id="popularSection">
      <div class="section-head">
        <div>
          <div class="section-title">ì§€ê¸ˆ ì¸ê¸° TOP</div>
          <div class="section-sub">ìµœê·¼ ì¼ì£¼ì¼ ê¸°ì¤€ìœ¼ë¡œ ê°€ì¥ ë§ì´ í”Œë ˆì´ ëœ í…ŒìŠ¤íŠ¸</div>
        </div>
        <button class="section-link" onclick="scrollToSection('latestSection')">
          ìµœì‹  í…ŒìŠ¤íŠ¸ ë³´ëŸ¬ê°€ê¸° â†’
        </button>
      </div>
      <div id="popularList" class="card-grid"></div>
      <p id="popularEmpty" class="empty-msg" style="display:none;">
        ì•„ì§ ì¸ê¸° ë°ì´í„°ê°€ ì—†ì–´ìš”. ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”.
      </p>
    </section>

    <!-- LATEST SECTION -->
    <section class="section" id="latestSection">
      <div class="section-head">
        <div>
          <div class="section-title">ë”°ëˆë”°ëˆ ìµœì‹  í…ŒìŠ¤íŠ¸</div>
          <div class="section-sub">ì˜¤ëŠ˜Â·ì–´ì œ ìƒˆë¡œ ì˜¬ë¼ì˜¨ í…ŒìŠ¤íŠ¸ ëª¨ì•„ë³´ê¸°</div>
        </div>
        <button class="section-link" onclick="scrollTo(0, 0)">
          ë§¨ ìœ„ë¡œ â†‘
        </button>
      </div>
      <div id="latestList" class="card-grid"></div>
      <p id="latestEmpty" class="empty-msg" style="display:none;">
        ì•„ì§ ë“±ë¡ëœ í…ŒìŠ¤íŠ¸ê°€ ì—†ì–´ìš”. ë¨¼ì € í•˜ë‚˜ ë§Œë“¤ì–´ ë³¼ê¹Œìš”?
      </p>
    </section>

    <footer>
      ë¬¸ì˜: <a href="mailto:ainam0727@gmail.com">ainam0727@gmail.com</a> Â·
      ë³¸ ì„œë¹„ìŠ¤ëŠ” ì—”í„°í…Œì¸ë¨¼íŠ¸ ìš©ë„ë¡œ ì œê³µë©ë‹ˆë‹¤.
    </footer>
  </div>

  <script>
    const categoryRow = document.getElementById("categoryRow");
    let currentCategory = "all";
    let popularTests = [];
    let latestTests = [];

    // ---------- HERO SLIDER ----------
    const slides = Array.from(document.querySelectorAll(".hero-slide"));
    const dots = Array.from(document.querySelectorAll(".hero-dot"));
    let currentSlide = 0;
    let sliderTimer = null;

    function showSlide(index) {
      slides.forEach((s, i) => {
        s.classList.toggle("active", i === index);
      });
      dots.forEach((d, i) => {
        d.classList.toggle("active", i === index);
      });
      currentSlide = index;
    }

    function startSlider() {
      if (sliderTimer) clearInterval(sliderTimer);
      sliderTimer = setInterval(() => {
        const next = (currentSlide + 1) % slides.length;
        showSlide(next);
      }, 4500);
    }

    dots.forEach((dot) => {
      dot.addEventListener("click", () => {
        const idx = Number(dot.dataset.index || 0);
        showSlide(idx);
        startSlider();
      });
    });

    startSlider();

    // ---------- CATEGORY FILTER ----------
    categoryRow.addEventListener("click", (e) => {
      const btn = e.target.closest(".cat-pill");
      if (!btn) return;
      const cat = btn.dataset.category;
      if (!cat) return;
      currentCategory = cat;
      document
        .querySelectorAll(".cat-pill")
        .forEach((b) => b.classList.toggle("active", b === btn));
      renderAll();
    });

    function scrollToSection(id) {
      const el = document.getElementById(id);
      if (!el) return;
      const top = el.getBoundingClientRect().top + window.scrollY - 72;
      window.scrollTo({ top, behavior: "smooth" });
    }

    // ---------- FETCH TEST DATA ----------
    async function fetchTests() {
      try {
        const [popularRes, latestRes] = await Promise.all([
          fetch("/api/tests?sort=popular&limit=6"),
          fetch("/api/tests?sort=latest&limit=6"),
        ]);

        const popularJson = await popularRes.json();
        const latestJson = await latestRes.json();

        popularTests = popularJson.tests || popularJson || [];
        latestTests = latestJson.tests || latestJson || [];

        updateStats(popularJson, latestJson);
        renderAll();
      } catch (err) {
        console.error("í…ŒìŠ¤íŠ¸ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜:", err);
        document.getElementById("popularEmpty").style.display = "block";
        document.getElementById("latestEmpty").style.display = "block";
      }
    }

    function updateStats(popularJson, latestJson) {
      const tests =
        (popularJson.tests || popularJson || []).concat(
          latestJson.tests || latestJson || []
        );

      const unique = new Map();
      tests.forEach((t) => {
        if (!t || !t.id) return;
        if (!unique.has(t.id)) unique.set(t.id, t);
      });

      const list = Array.from(unique.values());
      document.getElementById("totalCount").textContent = list.length.toString();

      const todayStr = new Date().toISOString().slice(0, 10);
      const todayCount = list.filter((t) => {
        const createdAt = t.createdAt || t.created_at;
        if (!createdAt) return false;
        return (createdAt + "").slice(0, 10) === todayStr;
      }).length;

      document.getElementById("todayCount").textContent =
        todayCount.toString();
    }

    function renderAll() {
      renderSection(
        popularTests,
        document.getElementById("popularList"),
        document.getElementById("popularEmpty"),
        "popular"
      );
      renderSection(
        latestTests,
        document.getElementById("latestList"),
        document.getElementById("latestEmpty"),
        "latest"
      );
    }

    function filterByCategory(tests) {
      if (currentCategory === "all") return tests;
      return tests.filter((t) => {
        const cat = (t.category || "").toString();
        if (!cat) return false;
        // ì¹´í…Œê³ ë¦¬ í…ìŠ¤íŠ¸ ì¼ë¶€ë§Œ í¬í•¨ë˜ì–´ë„ í†µê³¼
        return cat.includes(currentCategory);
      });
    }

    function renderSection(list, container, emptyEl, type) {
      container.innerHTML = "";
      const filtered = filterByCategory(list);

      if (!filtered || filtered.length === 0) {
        emptyEl.style.display = "block";
        return;
      }
      emptyEl.style.display = "none";

      filtered.forEach((test) => {
        const card = createCard(test, type);
        container.appendChild(card);
      });
    }

    function createCard(test, type) {
      const {
        id,
        title,
        shortDescription,
        description,
        category,
        moodTag,
        tag,
        mainTag,
        imageUrl,
        thumbnailUrl,
        isHot,
        playCount,
        viewCount,
      } = test;

      const thumb =
        thumbnailUrl ||
        imageUrl ||
        "https://images.pexels.com/photos/587741/pexels-photo-587741.jpeg?auto=compress&cs=tinysrgb&w=800";

      const sub =
        shortDescription ||
        description ||
        "ê°€ë³ê²Œ ì›ƒìœ¼ë©´ì„œ í’€ì–´ë³´ëŠ” ì‹¬ë§ˆì¼“ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸.";

      const mainTagText = mainTag || moodTag || tag || category || "ì‹¬ë¦¬í…ŒìŠ¤íŠ¸";
      const plays = playCount || 0;
      const views = viewCount || 0;

      const chipLabel =
        type === "popular"
          ? "HOT"
          : "NEW";

      const article = document.createElement("article");
      article.className = "card";
      article.innerHTML = `
        <div class="card-thumb">
          <img src="${thumb}" alt="${title || "ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ì¸ë„¤ì¼"}" />
          <div class="card-chip ${isHot ? "hot" : ""}">
            ${chipLabel}
          </div>
        </div>
        <div class="card-body">
          <h3 class="card-title">${title || "ì œëª© ì—†ëŠ” ì‹¬ë¦¬í…ŒìŠ¤íŠ¸"}</h3>
          <p class="card-desc">${sub}</p>
          <div class="card-tags">
            <span class="card-tag">#${mainTagText}</span>
            ${
              category
                ? `<span class="card-tag">${category}</span>`
                : ""
            }
          </div>
          <div class="card-footer">
            <span class="card-stat">ğŸ‘¥ ${plays.toLocaleString()}ëª… ì°¸ì—¬</span>
            <span class="card-stat">ğŸ‘€ ${views.toLocaleString()} ì¡°íšŒ</span>
          </div>
        </div>
      `;

      article.addEventListener("click", () => {
        goToTest(id);
      });

      return article;
    }

    function goToTest(id) {
      if (!id) return;
      // í´ë¦­ìˆ˜ ì¦ê°€ APIê°€ ì¡´ì¬í•˜ë©´ í˜¸ì¶œ, ì—†ìœ¼ë©´ ì¡°ìš©íˆ ì‹¤íŒ¨
      fetch(`/api/tests/${encodeURIComponent(id)}/click`, {
        method: "POST",
      }).catch(() => {});
      window.location.href = `index.html?testId=${encodeURIComponent(id)}`;
    }

    // ì´ˆê¸° ë¡œë“œ
    fetchTests();
  </script>
</body>
</html>
