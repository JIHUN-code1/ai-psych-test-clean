<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì‹¬ë§ˆì¼“ â€“ AI ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ë§ˆì¼“</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      background: #f5f5ff;
      color: #111827;
      padding: 24px 12px 40px;
    }
    a { color: inherit; text-decoration: none; }

    .page {
      max-width: 1120px;
      margin: 0 auto;
    }

    /* í—¤ë” */
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      gap: 12px;
    }
    .logo-wrap {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo-circle {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: linear-gradient(135deg,#6366f1,#ec4899);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 18px;
      font-weight: 800;
      box-shadow: 0 8px 18px rgba(99,102,241,0.35);
    }
    .logo-title {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .logo-title-main {
      font-size: 18px;
      font-weight: 800;
    }
    .logo-title-sub {
      font-size: 12px;
      color: #6b7280;
    }
    .header-buttons {
      display: flex;
      gap: 8px;
      flex-shrink: 0;
    }
    .btn {
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 13px;
      border: 1px solid rgba(148,163,184,0.6);
      background: #fff;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: all .15s ease;
      white-space: nowrap;
    }
    .btn:hover {
      background: #f9fafb;
      box-shadow: 0 4px 12px rgba(148,163,184,0.35);
      transform: translateY(-1px);
    }
    .btn-primary {
      border: none;
      background: linear-gradient(135deg,#6366f1,#ec4899);
      color: #fff;
      box-shadow: 0 10px 26px rgba(99,102,241,0.45);
    }
    .btn-primary:hover {
      transform: translateY(-1.5px);
    }

    /* ë°°ë„ˆ(ìŠ¬ë¼ì´ë”) */
    .hero {
      position: relative;
      overflow: hidden;
      border-radius: 24px;
      padding: 24px 20px 26px;
      margin-bottom: 22px;
      color: #fff;
      background: radial-gradient(circle at 0 0,#f97316 0,#6366f1 38%,#1e293b 100%);
    }
    .hero-inner {
      display: flex;
      gap: 20px;
      align-items: flex-start;
    }
    .hero-left {
      flex: 1.7;
      min-width: 0;
    }
    .hero-right {
      flex: 1.3;
      min-width: 0;
      text-align: right;
      font-size: 12px;
      color: rgba(226,232,240,0.85);
    }
    .hero-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(15,23,42,0.5);
      margin-bottom: 10px;
      backdrop-filter: blur(6px);
    }
    .hero-pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }
    .hero-title {
      font-size: 22px;
      font-weight: 800;
      margin-bottom: 10px;
    }
    .hero-sub {
      font-size: 13px;
      color: rgba(226,232,240,0.9);
      margin-bottom: 16px;
      line-height: 1.6;
    }
    .hero-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 14px;
    }
    .hero-tag {
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(15,23,42,0.45);
      border: 1px solid rgba(148,163,184,0.6);
      white-space: nowrap;
    }
    .hero-ctas {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .hero-slide-indicator {
      position: absolute;
      right: 18px;
      bottom: 16px;
      font-size: 11px;
      opacity: .8;
    }
    .hero-dots {
      display: inline-flex;
      gap: 4px;
      margin-left: 6px;
      vertical-align: middle;
    }
    .hero-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(148,163,184,0.7);
    }
    .hero-dot.active {
      background: #fbbf24;
      transform: scale(1.2);
    }

    /* ì¹´í…Œê³ ë¦¬ íƒ­ */
    .category-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 20px;
    }
    .category-pill {
      padding: 7px 12px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid #e5e7eb;
      background: #fff;
      color: #4b5563;
      cursor: pointer;
      white-space: nowrap;
      transition: all .12s ease;
    }
    .category-pill span {
      font-size: 11px;
      margin-left: 4px;
      color: #9ca3af;
    }
    .category-pill.active {
      background: #111827;
      color: #fff;
      border-color: #111827;
      box-shadow: 0 7px 18px rgba(15,23,42,0.36);
    }

    /* ì„¹ì…˜ */
    .section {
      margin-bottom: 26px;
    }
    .section-head {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      gap: 10px;
    }
    .section-title {
      font-size: 15px;
      font-weight: 700;
    }
    .section-caption {
      font-size: 11px;
      color: #9ca3af;
    }
    .section-link {
      font-size: 11px;
      color: #6366f1;
      cursor: pointer;
      white-space: nowrap;
    }

    /* ì¹´ë“œ ê·¸ë¦¬ë“œ */
    .card-grid {
      display: grid;
      grid-template-columns: repeat(3,minmax(0,1fr));
      gap: 14px;
    }
    @media (max-width: 960px) {
      .card-grid { grid-template-columns: repeat(2,minmax(0,1fr)); }
    }
    @media (max-width: 720px) {
      body { padding: 16px 10px 28px; }
      .header { flex-direction: column; align-items: flex-start; }
      .card-grid { grid-template-columns: minmax(0,1fr); }
      .hero { padding: 18px 16px 20px; }
      .hero-inner { flex-direction: column; }
      .hero-right { text-align: left; }
    }

    .card {
      border-radius: 18px;
      background: #fff;
      overflow: hidden;
      box-shadow: 0 10px 26px rgba(15,23,42,0.06);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      transition: transform .16s ease, box-shadow .16s ease, translate .16s ease;
      position: relative;
    }
    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 18px 40px rgba(15,23,42,0.12);
    }
    .card-thumb {
      position: relative;
      padding-top: 60%;
      overflow: hidden;
    }
    .card-thumb img,
    .card-thumb .thumb-placeholder {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .thumb-placeholder {
      background: radial-gradient(circle at 0 0,#38bdf8 0,#6366f1 40%,#111827 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(248,250,252,0.95);
      font-size: 13px;
      font-weight: 600;
      padding: 0 14px;
      text-align: center;
    }
    .card-badge {
      position: absolute;
      left: 10px;
      top: 10px;
      padding: 4px 9px;
      font-size: 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.8);
      color: #fef9c3;
      backdrop-filter: blur(4px);
    }
    .card-body {
      padding: 12px 13px 12px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      flex: 1;
    }
    .card-category {
      font-size: 11px;
      color: #9ca3af;
    }
    .card-title {
      font-size: 14px;
      font-weight: 700;
      color: #111827;
      line-height: 1.5;
      min-height: 2.9em;
    }
    .card-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
    }
    .card-tag {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
    }
    .card-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: #9ca3af;
      margin-top: 4px;
    }
    .card-meta span {
      display: inline-flex;
      align-items: center;
      gap: 3px;
    }
    .card-meta strong {
      color: #4b5563;
      font-weight: 600;
    }

    .empty-box {
      padding: 18px 14px;
      border-radius: 16px;
      background: #f9fafb;
      border: 1px dashed #e5e7eb;
      font-size: 12px;
      color: #6b7280;
    }

    .footer {
      margin-top: 24px;
      font-size: 11px;
      color: #9ca3af;
      text-align: right;
    }
    .footer span { color: #6366f1; }
  </style>
</head>
<body>
  <div class="page">
    <!-- ìƒë‹¨ í—¤ë” -->
    <header class="header">
      <div class="logo-wrap">
        <div class="logo-circle">ì‹¬</div>
        <div class="logo-title">
          <div class="logo-title-main">ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ë§ˆì¼“ <span style="color:#6366f1;">ì‹¬ë§ˆì¼“</span></div>
          <div class="logo-title-sub">ì·¨í–¥Â·ì—°ì• Â·ê¸ˆì „Â·TMIê¹Œì§€, ì˜¤ëŠ˜ ìš´ëª… í…ŒìŠ¤íŠ¸ë¥¼ ê³¨ë¼ë³´ì„¸ìš”.</div>
        </div>
      </div>
      <div class="header-buttons">
        <button class="btn" onclick="location.href='/index.html'">AI ìë™ ìƒì„±ê¸°</button>
        <button class="btn btn-primary" onclick="location.href='/admin/'">ê´€ë¦¬ì í˜ì´ì§€</button>
      </div>
    </header>

    <!-- íˆì–´ë¡œ / ìŠ¬ë¼ì´ë“œ ë°°ë„ˆ -->
    <section class="hero" id="hero">
      <div class="hero-inner">
        <div class="hero-left">
          <div class="hero-pill">
            <span class="hero-pill-dot"></span>
            <span id="hero-pill-text">ì˜¤ëŠ˜ ì—…ë°ì´íŠ¸ëœ ì‹¬í…Œ 3ê°œ</span>
          </div>
          <h1 class="hero-title" id="hero-title">ì˜¤ëŠ˜ ë°¤, ì–´ë–¤ í…ŒìŠ¤íŠ¸ë¡œ ë†€ì•„ë³¼ê¹Œìš”?</h1>
          <p class="hero-sub" id="hero-sub">
            ì—°ì•  ì˜¨ë„, TMI ì„±ê²©, ê¸ˆì „ ê°ê°ê¹Œì§€. ì‹¬ë§ˆì¼“ì—ì„œ ì§€ê¸ˆ ê°€ì¥ ëœ¨ê±°ìš´ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ë¥¼ ëª¨ì•„ë´¤ì–´ìš”.
          </p>
          <div class="hero-tags" id="hero-tags"></div>
          <div class="hero-ctas">
            <button class="btn btn-primary" onclick="location.href='/index.html'">AIë¡œ ìƒˆ í…ŒìŠ¤íŠ¸ ë§Œë“¤ê¸°</button>
            <button class="btn" onclick="scrollToSection('latest-section')">ìµœì‹  í…ŒìŠ¤íŠ¸ ë³´ëŸ¬ê°€ê¸°</button>
          </div>
        </div>
        <div class="hero-right">
          <div style="font-size:12px; margin-bottom:6px;">ì‹¤ì‹œê°„ ì‹¬í…Œ í˜„í™©</div>
          <div id="hero-stats">ì „ì²´ ë“±ë¡ 0ê°œ Â· ì˜¤ëŠ˜ ì—…ë°ì´íŠ¸ 0ê°œ</div>
        </div>
      </div>
      <div class="hero-slide-indicator">
        <span id="hero-slide-label">AI ì—°ì•  ì˜¨ë„ / TMI / ê¸ˆì „ ê°ê°</span>
        <span class="hero-dots" id="hero-dots"></span>
      </div>
    </section>

    <!-- ì¹´í…Œê³ ë¦¬ íƒ­ -->
    <nav class="category-bar" id="categoryBar">
      <button class="category-pill active" data-cat="all">ì „ì²´ ë³´ê¸°<span id="badge-all">0</span></button>
      <button class="category-pill" data-cat="ì—°ì• ">ì—°ì• /ì¸<span id="badge-love">0</span></button>
      <button class="category-pill" data-cat="ì„±ê²©/MBTI">ì„±ê²©/MBTI<span id="badge-mbti">0</span></button>
      <button class="category-pill" data-cat="ê¸ˆì „/ì†Œë¹„">ê¸ˆì „/ì†Œë¹„<span id="badge-money">0</span></button>
      <button class="category-pill" data-cat="ì§ì¥/ì»¤ë¦¬ì–´">ì§ì¥/ì»¤ë¦¬ì–´<span id="badge-work">0</span></button>
      <button class="category-pill" data-cat="ìš°ì •/ëŒ€ì¸ê´€ê³„">ìš°ì •/ëŒ€ì¸ê´€ê³„<span id="badge-friend">0</span></button>
      <button class="category-pill" data-cat="ë¼ì´í”„ìŠ¤íƒ€ì¼">ë¼ì´í”„ìŠ¤íƒ€ì¼<span id="badge-life">0</span></button>
    </nav>

    <!-- ì§€ê¸ˆ ëœ¨ëŠ” ì¸ê¸° TOP -->
    <section class="section" id="hot-section">
      <div class="section-head">
        <div>
          <div class="section-title">ì§€ê¸ˆ ëœ¨ëŠ” ì¸ê¸° TOP ğŸ”¥</div>
          <div class="section-caption">ìµœê·¼ ì¼ì£¼ì¼ ë™ì•ˆ ì°¸ì—¬ ìˆ˜ê°€ ë§ì€ í…ŒìŠ¤íŠ¸ë“¤ì…ë‹ˆë‹¤.</div>
        </div>
        <div class="section-link" onclick="scrollToSection('latest-section')">ìµœì‹  ì—…ë¡œë“œ ë³´ê¸°</div>
      </div>
      <div id="hot-list" class="card-grid"></div>
    </section>

    <!-- ë”°ëˆë”°ëˆ ìµœì‹  í…ŒìŠ¤íŠ¸ -->
    <section class="section" id="latest-section">
      <div class="section-head">
        <div>
          <div class="section-title">ë”°ëˆë”°ëˆ ìµœì‹  í…ŒìŠ¤íŠ¸ âœ¨</div>
          <div class="section-caption">ë°©ê¸ˆ ë§‰ ì—…ë¡œë“œ ëœ ë”°ëˆí•œ í…ŒìŠ¤íŠ¸ë¥¼ ë§Œë‚˜ë³´ì„¸ìš”.</div>
        </div>
      </div>
      <div id="latest-list" class="card-grid"></div>
    </section>

    <footer class="footer">
      Powered by <span>ì‹¬ë§ˆì¼“</span> Â· ë¬¸ì˜: ainam0727@gmail.com
    </footer>
  </div>

  <script>
    // --- ìŠ¬ë¼ì´ë“œ ë°°ë„ˆ ë°ì´í„° ---
    const HERO_SLIDES = [
      {
        pill: "AI ì—°ì•  ì˜¨ë„Â·ê¶í•© í…ŒìŠ¤íŠ¸",
        title: "ì˜¤ëŠ˜ ë°¤, ì—°ì•  ì˜¨ë„ ëª‡ ë„ì¸ê°€ìš”?",
        sub: "ì¸ì¸ì§€, ì—°ì¸ì¸ì§€, ì¹œêµ¬ì¸ì§€ ì• ë§¤í•œ ê·¸ ê´€ê³„. ì‹¬ë§ˆì¼“ ì¸ê¸° ì—°ì•  ì‹¬í…Œë¡œ ê°„í¸í•˜ê²Œ í™•ì¸í•´ ë³´ì„¸ìš”.",
        tags: ["ì—°ì•  ì˜¨ë„", "ì¸ì¸ì§€ ì• ë§¤í•  ë•Œ", "ê³ ë¯¼ë˜ëŠ” ê´€ê³„ ìƒíƒœ"],
        label: "ì—°ì• /ì¸ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸"
      },
      {
        pill: "TMI ì„±ê²©Â·MBTI ì‹¬í…Œ",
        title: "ë‚¨ë“¤ì´ ë³´ëŠ” ë‚˜ì˜ TMI ì„±ê²©ì€?",
        sub: "ë‚˜ë„ ëª°ëë˜ ë‚´ ì†ë§ˆìŒê³¼ TMI í¬ì¸íŠ¸ê¹Œì§€. ì¹œêµ¬ë‘ ê°™ì´ ëŒë¦¬ë©´ ë” ì¬ë°ŒëŠ” ì„±ê²© ì‹¬í…Œ ëª¨ìŒ.",
        tags: ["TMI ì„±ê²©", "ì¹œêµ¬ë‘ ê°™ì´", "íŒŒí‹°ìš© ì‹¬í…Œ"],
        label: "ì„±ê²©/MBTI ì‹¬ë¦¬í…ŒìŠ¤íŠ¸"
      },
      {
        pill: "ê¸ˆì „ ê°ê°Â·ì†Œë¹„ ìŠ¤íƒ€ì¼",
        title: "ë‚˜ëŠ” í”Œë ‰ìŠ¤í˜•? ì§ í…Œí¬í˜•?",
        sub: "ì§€ê¸ˆ í†µì¥ ì”ì•¡ì´ ë§í•´ì£¼ëŠ” ë‚´ ì†Œë¹„ ì„±í–¥. ì¬ë¯¸ë¡œ ë³´ëŠ” ëˆ ê´€ë¦¬ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸.",
        tags: ["ê¸ˆì „ ê°ê° ì²´í¬", "í”Œë ‰ìŠ¤ vs ì§ í…Œí¬", "ì˜¤ëŠ˜ì˜ ì†Œë¹„ ìš´ì„¸"],
        label: "ê¸ˆì „/ì†Œë¹„ ì„±í–¥ ì‹¬í…Œ"
      }
    ];

    let heroIndex = 0;
    let testsCache = [];

    function applyHeroSlide(idx) {
      const slide = HERO_SLIDES[idx];
      document.getElementById("hero-pill-text").textContent = slide.pill;
      document.getElementById("hero-title").textContent = slide.title;
      document.getElementById("hero-sub").textContent = slide.sub;
      document.getElementById("hero-slide-label").textContent = slide.label;

      const tagsWrap = document.getElementById("hero-tags");
      tagsWrap.innerHTML = "";
      slide.tags.forEach(t => {
        const span = document.createElement("div");
        span.className = "hero-tag";
        span.textContent = t;
        tagsWrap.appendChild(span);
      });

      const dotsWrap = document.getElementById("hero-dots");
      dotsWrap.innerHTML = "";
      HERO_SLIDES.forEach((_, i) => {
        const d = document.createElement("span");
        d.className = "hero-dot" + (i === idx ? " active" : "");
        dotsWrap.appendChild(d);
      });
    }

    function startHeroSlider() {
      applyHeroSlide(heroIndex);
      setInterval(() => {
        heroIndex = (heroIndex + 1) % HERO_SLIDES.length;
        applyHeroSlide(heroIndex);
      }, 5000);
    }

    function scrollToSection(id) {
      const el = document.getElementById(id);
      if (!el) return;
      window.scrollTo({ top: el.offsetTop - 16, behavior: "smooth" });
    }

    // --- í…ŒìŠ¤íŠ¸ ì¹´ë“œ ë Œë”ë§ ---

    function getImageUrl(test) {
      if (test.imageUrl && test.imageUrl.trim() !== "") return test.imageUrl;
      return null; // ê¸°ë³¸ í”Œë˜ì´ìŠ¤í™€ë” ì‚¬ìš©
    }

    function createCard(test, badgeText) {
      const card = document.createElement("article");
      card.className = "card";
      card.onclick = () => {
        if (!test.id) return;
        window.location.href = `/index.html?testid=${encodeURIComponent(test.id)}`;
      };

      const thumb = document.createElement("div");
      thumb.className = "card-thumb";

      const imgUrl = getImageUrl(test);
      if (imgUrl) {
        const img = document.createElement("img");
        img.src = imgUrl;
        img.alt = test.title || "ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ ì¸ë„¤ì¼";
        img.loading = "lazy";
        thumb.appendChild(img);
      } else {
        const placeholder = document.createElement("div");
        placeholder.className = "thumb-placeholder";
        placeholder.textContent = (test.title || "ì‹¬ë¦¬í…ŒìŠ¤íŠ¸").slice(0, 18);
        thumb.appendChild(placeholder);
      }

      if (badgeText) {
        const badge = document.createElement("div");
        badge.className = "card-badge";
        badge.textContent = badgeText;
        thumb.appendChild(badge);
      }

      const body = document.createElement("div");
      body.className = "card-body";

      const category = document.createElement("div");
      category.className = "card-category";
      category.textContent = test.category || "ê¸°íƒ€ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸";

      const title = document.createElement("div");
      title.className = "card-title";
      title.textContent = test.title || "ì œëª© ì—†ëŠ” ì‹¬ë¦¬í…ŒìŠ¤íŠ¸";

      const tagsWrap = document.createElement("div");
      tagsWrap.className = "card-tags";
      const tags = Array.isArray(test.tags) ? test.tags : [];
      tags.slice(0,3).forEach(t => {
        const tag = document.createElement("span");
        tag.className = "card-tag";
        tag.textContent = t;
        tagsWrap.appendChild(tag);
      });

      const meta = document.createElement("div");
      meta.className = "card-meta";
      const left = document.createElement("span");
      left.textContent = "ì°¸ì—¬ ";
      const plays = document.createElement("strong");
      plays.textContent = (test.plays || 0).toLocaleString() + "ëª…";
      left.appendChild(plays);

      const right = document.createElement("span");
      const views = (test.views || 0).toLocaleString();
      right.innerHTML = `ì¡°íšŒ <strong>${views}</strong>íšŒ`;

      meta.appendChild(left);
      meta.appendChild(right);

      body.appendChild(category);
      body.appendChild(title);
      if (tagsWrap.children.length) body.appendChild(tagsWrap);
      body.appendChild(meta);

      card.appendChild(thumb);
      card.appendChild(body);
      return card;
    }

    function renderSections(tests) {
      const hotBox = document.getElementById("hot-list");
      const latestBox = document.getElementById("latest-list");
      hotBox.innerHTML = "";
      latestBox.innerHTML = "";

      if (!tests || !tests.length) {
        const empty = document.createElement("div");
        empty.className = "empty-box";
        empty.textContent = "ì•„ì§ ë“±ë¡ëœ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ì²« ì‹¬í…Œë¥¼ ë“±ë¡í•´ ë³´ì„¸ìš”!";
        latestBox.appendChild(empty);
        return;
      }

      // ìµœì‹ ìˆœ
      const sortedByDate = [...tests].sort((a,b) => (b.createdAt || 0) - (a.createdAt || 0));
      const latest = sortedByDate.slice(0,6);

      latest.forEach(t => {
        latestBox.appendChild(createCard(t, "NEW"));
      });

      // HOT (isHot true or plays ìƒìœ„)
      const hotCandidates = tests.filter(t => t.isHot).length
        ? tests.filter(t => t.isHot)
        : [...tests].sort((a,b) => (b.plays || 0) - (a.plays || 0));

      const hot = hotCandidates.slice(0,6);
      hot.forEach((t, idx) => {
        const label = idx === 0 ? "HOT 1ìœ„" : "HOT";
        hotBox.appendChild(createCard(t, label));
      });

      // í†µê³„ ê°±ì‹ 
      document.getElementById("hero-stats").textContent =
        `ì „ì²´ ë“±ë¡ ${tests.length}ê°œ Â· ì˜¤ëŠ˜ ì—…ë°ì´íŠ¸ ${getTodayCount(tests)}ê°œ`;

      document.getElementById("badge-all").textContent = tests.length;
      document.getElementById("badge-love").textContent =
        tests.filter(t => (t.category || "").includes("ì—°ì• ")).length;
      document.getElementById("badge-mbti").textContent =
        tests.filter(t => (t.category || "").includes("ì„±ê²©") || (t.category || "").includes("MBTI")).length;
      document.getElementById("badge-money").textContent =
        tests.filter(t => (t.category || "").includes("ê¸ˆì „") || (t.category || "").includes("ì†Œë¹„")).length;
      document.getElementById("badge-work").textContent =
        tests.filter(t => (t.category || "").includes("ì§ì¥") || (t.category || "").includes("ì»¤ë¦¬ì–´")).length;
      document.getElementById("badge-friend").textContent =
        tests.filter(t => (t.category || "").includes("ìš°ì •") || (t.category || "").includes("ëŒ€ì¸")).length;
      document.getElementById("badge-life").textContent =
        tests.filter(t => (t.category || "").includes("ë¼ì´í”„")).length;
    }

    function getTodayCount(tests) {
      const today = new Date();
      today.setHours(0,0,0,0);
      return tests.filter(t => {
        if (!t.createdAt) return false;
        const d = new Date(t.createdAt);
        d.setHours(0,0,0,0);
        return d.getTime() === today.getTime();
      }).length;
    }

    async function loadTests(categoryFilter = "all") {
      try {
        const res = await fetch("/api/tests");
        if (!res.ok) throw new Error("failed");
        const data = await res.json();
        testsCache = Array.isArray(data) ? data : [];

        let filtered = testsCache;
        if (categoryFilter !== "all") {
          filtered = testsCache.filter(t => (t.category || "").includes(categoryFilter));
        }
        renderSections(filtered);
      } catch (e) {
        console.error(e);
        const latestBox = document.getElementById("latest-list");
        latestBox.innerHTML = "";
        const empty = document.createElement("div");
        empty.className = "empty-box";
        empty.textContent = "í…ŒìŠ¤íŠ¸ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ìƒˆë¡œê³ ì¹¨ í•´ ì£¼ì„¸ìš”.";
        latestBox.appendChild(empty);
      }
    }

    function setupCategoryFilter() {
      const pills = document.querySelectorAll(".category-pill");
      pills.forEach(pill => {
        pill.addEventListener("click", () => {
          pills.forEach(p => p.classList.remove("active"));
          pill.classList.add("active");
          const cat = pill.dataset.cat;
          if (cat === "all") loadTests("all");
          else loadTests(cat);
        });
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      startHeroSlider();
      setupCategoryFilter();
      loadTests("all");
    });
  </script>
</body>
</html>
